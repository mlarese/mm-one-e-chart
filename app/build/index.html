<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <title><%= htmlWebpackPlugin.options.title %></title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/extend.css">

    <script>
      var cartid = '227768f17c8a521b70f6731dec7b01dad6345b18967ba689867d460608fd3155';

      var cart = {"id":"227768f17c8a521b70f6731dec7b01dad6345b18967ba689867d460608fd3155","items":[],"rooms":[{"rowId":"13588-1-1","roomId":13588,"listId":1,"roomCode":"Family","name":"Family Room","treatmentCode":"BB","treatment":"Camera e colazione","price":"210.00","finalPrice":"210.00","discount":0,"photo":"https:\/\/reservation.cmsone.it\/common\/libs\/resizer\/resize.php?url=https%3A%2F%2Fbooking.bookingone.it%2Freservation.cmsone.it%2Fphotobook%2F1%2Froom%2F1_13588_family_1a43f.jpg&size=100x100c50","checkin":"23-01-2018","checkout":"24-01-2018","numNights":1,"adults":"2","child":"0","pax":2}],"coupon":{"value":0,"label":"","type":"","code":""},"insuranceResult":{"type":"","amount":"","premium":0,"contract":""},"insurance":{"type":"","amount":"","premium":0,"contract":""},"numOfRooms":1,"currentRoom":0};

      var rooms  = [{"rowId":"13588-1-1","roomId":13588,"listId":1,"roomCode":"Family","name":"Family Room","treatmentCode":"BB","treatment":"Camera e colazione","price":"210.00","finalPrice":"210.00","discount":0,"photo":"https:\/\/reservation.cmsone.it\/common\/libs\/resizer\/resize.php?url=https%3A%2F%2Fbooking.bookingone.it%2Freservation.cmsone.it%2Fphotobook%2F1%2Froom%2F1_13588_family_1a43f.jpg&size=100x100c50","checkin":"23-01-2018","checkout":"24-01-2018","numNights":1,"adults":"2","child":"0","pax":2}];

      //  controllare da cart serializzato se le room sono le stesse tramite rowid

      var structureConfig = {"specialServicesEnabled":"1","productCatalogOpen":"1","insuranceEnabled":"1","insuranceOpen":"1","currency":"EUR","currencyUTF8":"\u20ac","defaultCategory":0,"shops":[1],"partners":{"1":6},"ecommerceHosts":{"1":"https://ecommerce.abs-one.com\/"}};



      var flowSetup = {"stepRoomsEnable":"1","alternativeRoomsEnable":"1","stepEcommerceEnable":"1","stepAllianzEnable":"1","roomsFirst":"0"};

      var numrooms = '2';

      var currentsolution = '1';

      var reservationConditionsLink = 'https://reservation.abs.tmp/metis/show_terms.php';
      window.onStep3CartChange = function (cart, hasInsurance) {

      }

      var childrenData = {};

      var adultsCount =  4;

      var children = {};

      var adults =  4;
      var structure = { structureId: 1, portalId: 1 };

      //--------------------------------
      //--------------------- comparator
      var boBestPrice = 1340.464;

      var channels = [{"id":"6","name":"Booking.com XML","price":"0"},{"id":"100","name":"Bibione.com","price":"0"}];
      // channels = [];

      var children = childrenData;
      var adults = adultsCount;

      var checkin =  '23-01-2018';

      var checkout=  '24-01-2018';
      var boardId = 2;

      var structureId = 1
      var currency = '$'
      // var isTest = true
      //--------------------- comparator
      //--------------------------------

      cart.rooms = rooms;
      cart.id = cartid;
      cart.numOfRooms = rooms.length;
      cart.currentRoom = currentsolution;

      // var absServer =  'http://reservation.abs.tmp/';
      var absServer =  '//test.abs-one.com';
      /* comparator ecommerce  onlyecommerce special insurance step3*/
      var step = 'special';

      if(step === '') {
        step = 'comparator' ;
      }

      var locale = 'it';
      // var bookInfo = 'bookInfo'

      var nextStep = 'http://reservation.abs.tmp/metis/step_2_room_confirm_n.php?ABS_MMONE_BOOKING=4gj6a7b2418nb3jtap4f8k2en4';

      /**
       *
       http://ecommerce.abs-one.dev/RESTfulAPI/catalog/partner/categories
       *
       */

      var addCoupon = function (value, type, label, code) {
          application.addCoupon({value: value, type: type, label: label, code: code}) // v, p
      }

      var removeCoupon = function () {
        application.removeCoupon()
      }

    </script>
    
  </head>
  <body>
    <div class="container no-pd-xs">
      <div id="app"></div>
      <input ref="submit_butt" type="button" onclick="alert('submit')" id="submit_butt" value="Submit">
      <input type="button" onclick="addCoupon(100, 'v', 'Promozioni inverno', 'WINTER17')" value="Add Coupon 100â‚¬">
      <input type="button" onclick="addCoupon(20, 'p', 'Welcome', 'WELCOME')" value="Add Coupon 20%">
      <input type="button" onclick="removeCoupon()" value="Remove Coupon">
    </div>
  </body>
</html>